# Kafka Configuration
kafka:
  bootstrap-servers: localhost:9092

# Producer Configuration
  producer:
    key-serializer: org.apache.kafka.common.serialization.StringSerializer
    value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
    acks: all
    retries: 3
    batch-size: 16384
    buffer-memory: 33554432
    compression-type: snappy
    linger-ms: 10
    max-in-flight-requests-per-connection: 5
    enable-idempotence: true
    properties:
      spring.json.add.type.headers: false

# Consumer Configuration
  consumer:
    key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
    value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
    group-id: notification-service-group
    auto-offset-reset: earliest
    enable-auto-commit: false
    max-poll-records: 10
    properties:
      spring.json.trusted.packages: "*"
      spring.json.value.default.type: com.aigreentick.services.notification.kafka.event.EmailNotificationEvent

# Listener Configuration
  listener:
    ack-mode: manual
    concurrency: 3
    poll-timeout: 3000
    type: batch

# Admin Configuration
  admin:
    properties:
      bootstrap.servers: localhost:9092
      
# Custom Kafka Configuration
  topics:
    email-notification: email.notification.topic
    email-notification-retry: email.notification.retry.topic
    email-notification-dlq: email.notification.dlq.topic
    email-notification-success: email.notification.success.topic
    email-notification-failed: email.notification.failed.topic
    push-notification: push.notification.topic
    notification-audit: notification.audit.topic
  
  partitions: 3
  replication-factor: 1
  
  retry:
    max-attempts: 3
    backoff-ms: 1000
    max-backoff-ms: 10000
    multiplier: 2.0
  
  dlq:
    enabled: true
    retention-ms: 604800000 # 7 days